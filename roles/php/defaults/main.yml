# Location for PHP installation
php_install_path: /usr/local/php

# Version of PHP to install
php_version: "7.4.1"

# Path where to download and unpack PHP sources
php_sources_path: /usr/src

# User that should compile PHP
php_build_user: developer

# Group of the user that should compile PHP
php_build_group: developer

# List of arguments for ./configure command
php_configure_options:
 - "--prefix={{ php_install_path }}"
 - --enable-fpm
 - --disable-short-tags
 - --with-openssl
 - --with-pcre-jit
 - --with-zlib
 - --with-bz2
 - --enable-calendar
 - --with-curl
 - --enable-exif
 - --enable-gd
 - --with-webp
 - --with-jpeg
 - --enable-intl
 - --enable-mbstring
 - --with-mysqli
 - --enable-pcntl
 - --without-sqlite3
 - --without-pdo-sqlite
 - --with-pdo-mysql

# List of key - value items that should be present in php.ini file in [PHP] section
php_ini_config_option_php_section:
 short_open_tag: "Off"
 expose_php: "Off"
 max_execution_time: "30"
 memory_limit: "128M"
 error_reporting: "E_ALL"
 display_errors: "Off"
 display_startup_errors: "Off"
 log_errors: "On"
 post_max_size: "8M"
 upload_max_filesize: "2M"

# Configure PHP Date Timezone
php_date_timezone: UTC

# Configure MySQL socket path
php_mysql_socket: /var/lib/mysql/mysql.sock

####### CHOOSE IF THIS ROLE SHOULD EXECUTE TASKS FROM GIVEN GROUPS #######

# Should this role use extensions tasks to install PECL extensions?
php_manage_extensions: yes

# Should this role use composer tasks to install composer?
php_manage_composer: yes

# Should this role configure and enable OPcache?
php_manage_opcache: yes





####### INSTALL TASKS CONFIGURATION #######

# Path where to install composer bin
php_composer_install_path: /usr/local/bin





####### CONFIGURE TASKS CONFIGURATION #######

# Path to php.ini file
php_ini_file_path: "{{ php_install_path }}/lib/php.ini"






####### EXTENSION TASKS CONFIGURATION #######

# List of PECL extensions that should be installed
php_extensions:
  - mongodb
  - redis
  - xdebug





####### OPCACHE TASKS CONFIGURATION #######

# Enable OPcache
php_opcache_enable: "1"

# OPcache memory consumption (in MB)
php_opcache_memory_consumption: "128"

# Memory size for interned string (in MB)
php_opcache_interned_strings_buffer: "8"

# Number of accelerated files
php_opcache_accelerated_files: "20000"

# Validate files timestamp (for dev environment recommended value is 1)
php_opcache_validated_timestamps: "0"
